2025-12-12 | Earliest Closing Time to Minimize Shop Penalty


Question
Given a customer visit log string customers of 'Y' and 'N',  
return the earliest hour to close the shop such that the penalty is minimized.

Approach
1.	Interpret the problem as choosing a split point j.
	-	Left part [0..j−1] contributes penalties for 'N'.
	-	Right part [j..n−1] contributes penalties for 'Y'.
2.	Let:
	-	totalY = total number of 'Y' in the entire string.
	-	Initially, if the shop closes at hour 0:
		-	All 'Y' hours are penalties → penalty = totalY.
3.	Move the closing time j from left to right:
	-	If customers[j] == 'Y':
		-	This hour moves from closed to open → penalty decreases by 1.
	-	If customers[j] == 'N':
		-	This hour moves from closed to open → penalty increases by 1.
4.	Track the minimum penalty seen and the earliest hour achieving it.
5.	Time complexity: O(n).  
   Space complexity: O(1).

Solution
class Solution {
public:
    int bestClosingTime(string customers) {
        int n = customers.size();
        
        // Initial penalty if shop closes at hour 0:
        // all 'Y' hours are closed → penalty = count of 'Y'
        int penalty = 0;
        for (char c : customers) {
            if (c == 'Y') penalty++;
        }

        int minPenalty = penalty;
        int bestHour = 0;

        // Try closing after each hour
        for (int j = 0; j < n; j++) {
            if (customers[j] == 'Y') {
                penalty--; // was closed, now open
            } else {
                penalty++; // was closed with no penalty, now open and empty
            }

            if (penalty < minPenalty) {
                minPenalty = penalty;
                bestHour = j + 1;
            }
        }

        return bestHour;
    }
};
