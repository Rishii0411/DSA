2025-12-08 | Find All Elements Appearing Twice (1..n, each appears at most twice)

Question
Given an array arr[] of size n, containing elements from the range 1 to n, and each element appears at most twice, return an array of all the integers that appears twice.  
You may return them in any order.

Approach
1.  Iterate through the array.
2.  For each value x = abs(arr[i]):
    - Map x → index x−1.
    - If arr[x−1] is still positive, flip its sign → first visit.
    - If arr[x−1] is already negative, it means x appeared before → x is a duplicate.
3.  Store duplicates in a result vector.
4.  Time complexity: O(n).
5.  Space complexity: O(1) extra (ignoring the output vector).

Solution

class Solution {
public:
    vector<int> findDuplicates(vector<int>& arr) {
        int n = arr.size();
        vector<int> result;

        for (int i = 0; i < n; i++) {
            int x = abs(arr[i]);
            int idx = x - 1;

            if (arr[idx] < 0) {
                result.push_back(x);  // second time seen
            } else {
                arr[idx] = -arr[idx]; // mark first time
            }
        }

        return result;
    }
};
